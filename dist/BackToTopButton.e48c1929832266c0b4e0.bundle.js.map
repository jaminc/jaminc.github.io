{"version":3,"sources":["webpack:///./src/js/backToTopButton/BackToTopButton.js","webpack:///./src/templates/partials/backToTopButton/backToTopButton.hbs"],"names":["resetFocus","document","activeElement","blur","OFFSET_TO_APPEAR","BackToTopButton","templateString","tempDiv","options","Object","assign","this","offsetToAppear","button","template","createElement","innerHTML","firstElementChild","body","appendChild","updateButtonVisibility","window","addEventListener","duration","requestAnimationFrame","scrollTo","cosParameter","pageYOffset","scrollCount","oldTimestamp","performance","now","step","newTimestamp","Math","PI","round","cos","scrollToTop","model","subscribeToSidebarOpenState","onChangeSideBarOpenState","bind","setButtonVisibility","show","classList","add","remove","isOpen","setTimeout","Handlebars","module","exports","container","depth0","helpers","partials","data"],"mappings":"6VAGA,SAASA,IACPC,SAASC,cAAcC,OAmCzB,IAAMC,EAAmB,IAEJC,E,WACnB,aAA0B,IATJC,EAChBC,EAQMC,EAAc,uDAAJ,I,4FAAI,SACxBC,OAAOC,OAAOC,KAAMH,GACpBG,KAAKC,eAAiBJ,EAAQI,gBAAkBR,EAChDO,KAAKE,QAZeP,EAYSQ,OAXzBP,EAAUN,SAASc,cAAc,QAC/BC,UAAYV,EACbC,EAAQU,mB,uDAYP,WACNhB,SAASiB,KAAKC,YAAYR,KAAKE,QAE/BF,KAAKS,yBAELC,OAAOC,iBAAiB,UAAU,kBAAM,EAAKF,4BAC7CT,KAAKE,OAAOS,iBAAiB,SAAS,kBA/C1C,WAAqC,IAAhBC,EAAgB,uDAAL,IAC9B,IAAKF,OAAOG,sBAGV,OAFAH,OAAOI,SAAS,EAAG,QACnBzB,IAIF,IAAM0B,EAAeL,OAAOM,YAAc,EACtCC,EAAc,EACdC,EAAeC,YAAYC,MAc/BV,OAAOG,uBAZP,SAASQ,EAAKC,IACZL,GAAeM,KAAKC,IAAMZ,GAAYU,EAAeJ,MAClCK,KAAKC,IAAId,OAAOI,SAAS,EAAG,GACpB,IAAvBJ,OAAOM,aAIXN,OAAOI,SAAS,EAAGS,KAAKE,MAAMV,EAAgBA,EAAeQ,KAAKG,IAAIT,KACtEC,EAAeI,EACfZ,OAAOG,sBAAsBQ,IAL3BhC,OAgC0CsC,MAC5C3B,KAAK4B,MAAMC,4BAA4B7B,KAAK8B,yBAAyBC,KAAK/B,S,+CAI1EA,KAAKgC,oBAAoBtB,OAAOM,YAAchB,KAAKC,kB,0CAGjCgC,GACdA,EACFjC,KAAKE,OAAOgC,UAAUC,IAAI,QAE1BnC,KAAKE,OAAOgC,UAAUE,OAAO,U,+CAIRC,GAAQ,WAC3BA,EACF3B,OAAO4B,YAAW,kBAAM,EAAKN,qBAAqBK,MAElDrC,KAAKS,8B,mDC1EX,IAAI8B,EAAa,EAAQ,GAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYpC,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASuC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,MAAO,uJACT,SAAU","file":"BackToTopButton.e48c1929832266c0b4e0.bundle.js","sourcesContent":["import template from '../../templates/partials/backToTopButton/backToTopButton.hbs';\nimport '../../scss/backToTopButton/BackToTopButton.scss';\n\nfunction resetFocus() {\n  document.activeElement.blur();\n}\n\nfunction scrollToTop(duration = 400) {\n  if (!window.requestAnimationFrame) {\n    window.scrollTo(0, 0);\n    resetFocus();\n    return;\n  }\n\n  const cosParameter = window.pageYOffset / 2;\n  let scrollCount = 0;\n  let oldTimestamp = performance.now();\n\n  function step(newTimestamp) {\n    scrollCount += Math.PI / (duration / (newTimestamp - oldTimestamp));\n    if (scrollCount >= Math.PI) window.scrollTo(0, 0);\n    if (window.pageYOffset === 0) {\n      resetFocus();\n      return;\n    }\n    window.scrollTo(0, Math.round(cosParameter + (cosParameter * Math.cos(scrollCount))));\n    oldTimestamp = newTimestamp;\n    window.requestAnimationFrame(step);\n  }\n\n  window.requestAnimationFrame(step);\n}\n\nfunction templateToHTML(templateString) {\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = templateString;\n  return tempDiv.firstElementChild;\n}\n\nconst OFFSET_TO_APPEAR = 300;\n\nexport default class BackToTopButton {\n  constructor(options = {}) {\n    Object.assign(this, options);\n    this.offsetToAppear = options.offsetToAppear || OFFSET_TO_APPEAR;\n    this.button = templateToHTML(template());\n  }\n\n  start() {\n    document.body.appendChild(this.button);\n\n    this.updateButtonVisibility();\n\n    window.addEventListener('scroll', () => this.updateButtonVisibility());\n    this.button.addEventListener('click', () => scrollToTop());\n    this.model.subscribeToSidebarOpenState(this.onChangeSideBarOpenState.bind(this));\n  }\n\n  updateButtonVisibility() {\n    this.setButtonVisibility(window.pageYOffset > this.offsetToAppear);\n  }\n\n  setButtonVisibility(show) {\n    if (show) {\n      this.button.classList.add('show');\n    } else {\n      this.button.classList.remove('show');\n    }\n  }\n\n  onChangeSideBarOpenState(isOpen) {\n    if (isOpen) {\n      window.setTimeout(() => this.setButtonVisibility(!isOpen));\n    } else {\n      this.updateButtonVisibility();\n    }\n  }\n}\n","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<button aria-label=\\\"back to top of page button\\\" href=\\\"#\\\" class=\\\"back-to-top-button\\\">\\n    <div class=\\\"back-to-top-button-arrow\\\"></div>\\n</button>\\n\";\n},\"useData\":true});"],"sourceRoot":""}